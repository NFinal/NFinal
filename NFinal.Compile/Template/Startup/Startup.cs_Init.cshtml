using Owin;
using Microsoft.Owin;
using Microsoft.Owin.Extensions;

[assembly: OwinStartup(typeof(@{@Model.project}.Startup))]
namespace @{@Model.project}
{
    public class Startup
    {
       public void Configuration(IAppBuilder appBuilder)
       {
			#if MicrosoftOwin
            appBuilder.Use<NFinal.Middleware>();
            //Microsoft.Owin.StaticFiles.ContentTypes.FileExtensionContentTypeProvider provider = new Microsoft.Owin.StaticFiles.ContentTypes.FileExtensionContentTypeProvider();
            //provider.Mappings.Add(".svgz", "image/svg+xml");
            //appBuilder.UseStaticFiles(new Microsoft.Owin.StaticFiles.StaticFileOptions {
            //    ServeUnknownFileTypes = true,
            //    DefaultContentType = "application/octet-stream",
            //    ContentTypeProvider=provider
            //});
            appBuilder.UseStageMarker(PipelineStage.Authenticate);
			#endif
			#if NFinalOwin
						appBuilder.Use<NFinal.NFinalOwinMiddleware>();
						appBuilder.UseStageMarker(PipelineStage.Authenticate);
			#endif
        }
    }
}