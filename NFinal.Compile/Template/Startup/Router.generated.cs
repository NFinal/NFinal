#pragma warning disable 1591
//------------------------------------------------------------------------------
// <auto-generated>
//     此代码由工具生成。
//     运行时版本:4.0.30319.42000
//
//     对此文件的更改可能会导致不正确的行为，并且如果
//     重新生成代码，这些更改将会丢失。
// </auto-generated>
//------------------------------------------------------------------------------

namespace NFinal.Compile.Template.Startup
{
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Text;
    
    [System.CodeDom.Compiler.GeneratedCodeAttribute("RazorGenerator", "2.0.0.0")]
    public partial class Router : RazorGenerator.Templating.RazorTemplateBase
    {
#line hidden
        #line 3 "..\..\Template\Startup\Router.cshtml"
           
    public Compile.Template.Startup.RouterModel Model { get; set; }

        #line default
        #line hidden
        
        public override void Execute()
        {
WriteLiteral("\r\n");

WriteLiteral(@"﻿//======================================================================
//
//        Copyright : Zhengzhou Strawberry Computer Technology Co.,LTD.
//        All rights reserved
//        
//        Application:NFinal MVC framework
//        Filename :Router.cs
//        Description :路由类
//
//        created by Lucas at  2015-10-15`
//     
//        WebSite:http://www.nfinal.com
//
//======================================================================
using System;
using System.Collections.Generic;
#if (!MicrosoftOwin && !NFinalOwin)
using System.Web;
#endif
using System.Threading;
using System.Globalization;
using System.Text.RegularExpressions;
using NFinal;

namespace ");

            
            #line 30 "..\..\Template\Startup\Router.cshtml"
            
            
            #line default
            #line hidden
            
            #line 30 "..\..\Template\Startup\Router.cshtml"
       Write(Model.project);

            
            #line default
            #line hidden
            
            #line 30 "..\..\Template\Startup\Router.cshtml"
                          
            
            #line default
            #line hidden
WriteLiteral("\r\n{\r\n#if (!MicrosoftOwin && !NFinalOwin)\r\n    public static class Router\r\n    {\r\n" +
"        public static string GetString(string val, string de)\r\n        {\r\n      " +
"      return string.IsNullOrEmpty(val) ? de : val;\r\n        }\r\n        public st" +
"atic string UCFirst(string val)\r\n        {\r\n            CultureInfo cultureInfo " +
"= Thread.CurrentThread.CurrentCulture;\r\n            return cultureInfo.TextInfo." +
"ToTitleCase(val);\r\n        }\r\n\t\t private static void Callback(IAsyncResult resul" +
"t)\r\n        {\r\n            //结束异步写入\r\n            System.IO.FileStream stream = (" +
"System.IO.FileStream)result.AsyncState;\r\n            stream.EndWrite(result);\r\n " +
"           stream.Dispose();\r\n        }\r\n\t\t//设置浏览器缓存\r\n        public static void" +
" SetBrowerCache(HttpContext context,int optimizing,int seconds)\r\n        {\r\n    " +
"        //浏览器缓存\r\n            if ((optimizing & (int)NFinal.Optimizing.Cache_Brow" +
"er_Cached) != 0)\r\n            {\r\n                context.Response.Cache.SetCache" +
"ability(HttpCacheability.Public);\r\n                //NotModify\r\n                " +
"if ((optimizing & (int)NFinal.Optimizing.Cache_Browse_NotModify) != 0)\r\n        " +
"        {\r\n                    context.Response.Cache.SetLastModifiedFromFileDep" +
"endencies();\r\n                }\r\n                //Expires\r\n                else" +
" if ((optimizing & (int)NFinal.Optimizing.Cache_Browser_Expires) != 0)\r\n        " +
"        {\r\n                    context.Response.Cache.SetExpires(DateTime.Now.Ad" +
"dSeconds(seconds));\r\n                }\r\n                //NoExpires\r\n           " +
"     else if ((optimizing & (int)NFinal.Optimizing.Cache_Browser_NoExpires) != 0" +
")\r\n                {\r\n                }\r\n            }\r\n            else\r\n      " +
"      {\r\n                //不进行缓存\r\n                context.Response.Cache.SetNoSt" +
"ore();\r\n            }\r\n        }\r\n        //设置服务器缓存\r\n        public static void " +
"SetServerCacheAndOutPut(HttpContext context, string url, string query, byte[] bu" +
"ffer, int optimizing, int seconds)\r\n        {\r\n            //服务器缓存\r\n            " +
"if ((optimizing & (int)NFinal.Optimizing.Cache_Server_Cached) != 0)\r\n           " +
" {\r\n                //FileDependency\r\n                if ((optimizing & (int)NFi" +
"nal.Optimizing.Cache_Server_FileDependency) != 0)\r\n                {\r\n\t\t\t\t\tstrin" +
"g fileName=null;\r\n\t\t\t\t\tif(url.EndsWith(\"/\"))\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tfileName = NFinal.Ut" +
"ility.MapPath(url+\"Index.html\");\r\n\t\t\t\t\t}\r\n                    else\r\n\t\t\t\t\t{\r\n\t\t\t\t" +
"\t\tfileName = NFinal.Utility.MapPath(url);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif ((optimizing & (int)N" +
"Final.Optimizing.CompressZip) != 0)\r\n                    {\r\n                    " +
"    fileName = fileName + \".zip\";\r\n                    }\r\n                    el" +
"se if ((optimizing & (int)NFinal.Optimizing.CompressDeflate) != 0)\r\n            " +
"        {\r\n                        fileName = fileName + \".deflate\";\r\n          " +
"          }\r\n                    //将HTML写入静态文件\r\n                    if (!System." +
"IO.File.Exists(fileName))\r\n                    {\r\n                        string" +
" dir = System.IO.Path.GetDirectoryName(fileName);\r\n                        if (!" +
"System.IO.Directory.Exists(dir))\r\n                        {\r\n                   " +
"         System.IO.Directory.CreateDirectory(dir);\r\n                        }\r\n " +
"                       System.IO.FileStream file = new System.IO.FileStream(file" +
"Name, System.IO.FileMode.Create, System.IO.FileAccess.Write, System.IO.FileShare" +
".ReadWrite, 1024, true);\r\n                        file.BeginWrite(buffer, 0, buf" +
"fer.Length, new AsyncCallback(Callback), file);\r\n                    }\r\n\t\t\t\t\tif " +
"(seconds > 0)\r\n                    {\r\n\t\t\t\t\t\t//将HTML插入新的缓存\r\n\t\t\t\t\t\tSystem.Web.Cach" +
"ing.CacheDependency dep = new System.Web.Caching.CacheDependency(fileName);\r\n\t\t\t" +
"\t\t\tHttpRuntime.Cache.Insert(url, buffer, dep, System.Web.Caching.Cache.NoAbsolut" +
"eExpiration, System.Web.Caching.Cache.NoSlidingExpiration);\r\n\t\t\t\t\t}\r\n           " +
"     }\r\n                //AbsoluteExpiration\r\n                else if ((optimizi" +
"ng & (int)NFinal.Optimizing.Cache_Server_AbsoluteExpiration) != 0)\r\n            " +
"    {\r\n                    HttpRuntime.Cache.Insert(url+query, buffer, null, Dat" +
"eTime.Now.AddSeconds(seconds), System.Web.Caching.Cache.NoSlidingExpiration);\r\n " +
"               }\r\n                //SlidingExpiration\r\n                else if (" +
"(optimizing & (int)NFinal.Optimizing.Cache_Server_SlidingExpiration) != 0)\r\n    " +
"            {\r\n                    HttpRuntime.Cache.Insert(url+query, buffer, n" +
"ull, System.Web.Caching.Cache.NoAbsoluteExpiration, new TimeSpan(0, 0, seconds))" +
";\r\n                }\r\n            }\r\n            //直接输出\r\n            context.Res" +
"ponse.OutputStream.Write(buffer, 0, buffer.Length);\r\n            context.Respons" +
"e.OutputStream.Dispose();\r\n        }\r\n        //写入缓存\r\n        public static bool" +
" WriteCache(HttpContext context,string url,int optimizing)\r\n        {\r\n         " +
"   //服务器缓存\r\n            if ((optimizing & (int)NFinal.Optimizing.Cache_Server_Ca" +
"ched) != 0)\r\n            {\r\n                object cache = HttpRuntime.Cache.Get" +
"(url);\r\n                //如果缓存存在则直接输出.\r\n                if (cache != null)\r\n    " +
"            {\r\n                    if ((optimizing & (int)NFinal.Optimizing.Comr" +
"esssed) != 0)\r\n                    {\r\n                        if ((optimizing & " +
"(int)NFinal.Optimizing.CompressZip) != 0)\r\n                        {\r\n          " +
"                  context.Response.AppendHeader(\"Content-encoding\", \"gzip\");\r\n  " +
"                      }\r\n                        else if ((optimizing & (int)NFi" +
"nal.Optimizing.CompressDeflate) != 0)\r\n                        {\r\n              " +
"              context.Response.AppendHeader(\"Content-encoding\", \"deflate\");\r\n   " +
"                     }\r\n                    }\r\n                    byte[] buffer" +
"= (byte[])cache;\r\n                    context.Response.OutputStream.Write(buffer" +
", 0, buffer.Length);\r\n                    context.Response.OutputStream.Dispose(" +
");\r\n                    return true;\r\n                }\r\n            }\r\n        " +
"    return false;\r\n        }\r\n        /// <summary>\r\n        /// 计算actionUrl\r\n  " +
"      /// </summary>\r\n        /// <param");

WriteLiteral(" name=\"requestedPath\"");

WriteLiteral("></param>\r\n        /// <returns></returns>\r\n        private static string GetActi" +
"onUrl(string requestedPath)\r\n        {\r\n            int position = requestedPath" +
".LastIndexOf(\'.\');\r\n            string actionUrl = \"\";\r\n            if (position" +
" > 0)\r\n            {\r\n\t\t\t\tint pointer = 0;\r\n                bool hasGet = int.Tr" +
"yParse(requestedPath.Substring(position - 2, 2), out pointer);\r\n                " +
"if (hasGet)\r\n                {\r\n                    actionUrl = requestedPath.Su" +
"bstring(0, pointer + 1);\r\n                }\r\n                else\r\n             " +
"   {\r\n                    actionUrl = requestedPath;\r\n                }\r\n       " +
"     }\r\n            return actionUrl;\r\n        }\r\n        public static void Run" +
"(HttpContext context, string requestedPath)\r\n        {\r\n            //取出action标识" +
"\r\n            int find = 0;\r\n            string f = requestedPath.Substring(requ" +
"estedPath.Length - 8, 5);\r\n            int.TryParse(requestedPath.Substring(requ" +
"estedPath.Length - 8, 5), out find);\r\n            //去掉00000.htm后缀,还原requestPath\r" +
"\n            requestedPath = requestedPath.Substring(0, requestedPath.Length - 8" +
");\r\n            string[] hostName = context.Request.Url.Host.ToString().Split(\'." +
"\');\r\n            string subdomain = hostName.Length == 3 ? hostName[0] : \"www\";\r" +
"\n            IDictionary<string,StringContainer> get = new Dictionary<string,Str" +
"ingContainer>();\r\n\t\t\t//提取MethodType\r\n            NFinal.MethodType methodType = " +
"NFinal.MethodType.NONE;\r\n            switch (context.Request.HttpMethod)\r\n      " +
"      {\r\n                case \"POST\": methodType = NFinal.MethodType.POST; break" +
";\r\n                case \"GET\": methodType = NFinal.MethodType.GET; break;\r\n     " +
"           case \"DELETE\": methodType = NFinal.MethodType.DELETE; break;\r\n       " +
"         case \"PUT\": methodType = NFinal.MethodType.PUT; break;\r\n               " +
" case \"AJAX\": methodType = NFinal.MethodType.AJAX; break;\r\n                defau" +
"lt: methodType = NFinal.MethodType.NONE; break;\r\n            }\r\n            //提取" +
"内容类型\r\n\t\t\tDictionary<string,NFinal.HttpFile> files = null;\r\n\t\t\tif (methodType == " +
"NFinal.MethodType.POST)\r\n\t\t\t{\r\n\t\t\t\tNFinal.ContentType contentType = NFinal.Conte" +
"ntType.NONE;\r\n\t\t\t\tswitch (context.Request.ContentType.Split(\';\')[0])\r\n\t\t\t\t{\r\n\t\t\t" +
"\t\tcase \"multipart/form-data\":contentType = NFinal.ContentType.Multipart_form_dat" +
"a; break;\r\n                    case \"text/json\":\r\n\t\t\t\t\tcase \"application/json\":c" +
"ontentType = NFinal.ContentType.Application_json; break;\r\n\t\t\t\t\tcase \"application" +
"/x-www-form-urlencoded\":contentType = NFinal.ContentType.Application_x_www_form_" +
"urlencoded; break;\r\n                    case \"application/xml\":\r\n               " +
"     case \"text/xml\":contentType = NFinal.ContentType.Text_xml; break;\r\n\t\t\t\t\tcas" +
"e \"application/octet-stream\":contentType = NFinal.ContentType.Application_octet_" +
"stream;break;\r\n\t\t\t\t\tdefault:contentType = NFinal.ContentType.NONE; break;\r\n\t\t\t\t}" +
"\r\n\t\t\t\t//提取form参数\r\n\t\t\t\tif (context.Request.InputStream!=System.IO.Stream.Null)\r\n\t" +
"\t\t\t{\r\n\t\t\t\t\tif (contentType == NFinal.ContentType.Application_x_www_form_urlencod" +
"ed)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tSystem.IO.StreamReader sr = new System.IO.StreamReader(contex" +
"t.Request.InputStream);\r\n\t\t\t\t\t\tstring body = sr.ReadToEnd();\r\n\t\t\t\t\t\tsr.Dispose()" +
";\r\n\t\t\t\t\t\tif (!string.IsNullOrEmpty(body))\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tstring[] formArray = " +
"body.Split(\'&\', \'=\');\r\n\t\t\t\t\t\t\tif (formArray.Length > 1 && (formArray.Length & 1)" +
" == 0)\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tfor (int i = 0; i < formArray.Length; i");

WriteLiteral(" +=");

WriteLiteral(" 2)\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tget.AddValue(formArray[i], formArray[i + 1]);\r\n\t\t\t\t\t\t\t\t}" +
"\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if (contentType == NFinal.ContentType.Tex" +
"t_xml)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tSystem.IO.StreamReader sr = new System.IO.StreamReader(con" +
"text.Request.InputStream);\r\n\t\t\t\t\t\tstring body = sr.ReadToEnd();\r\n\t\t\t\t\t\tsr.Dispos" +
"e();\r\n\t\t\t\t\t\tif (!string.IsNullOrEmpty(body))\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tSystem.Xml.XmlDocu" +
"ment doc = new System.Xml.XmlDocument();\r\n\t\t\t\t\t\t\tdoc.LoadXml(body);\r\n\t\t\t\t\t\t\tfore" +
"ach (System.Xml.XmlElement xmlNode in doc.DocumentElement.ChildNodes)\r\n\t\t\t\t\t\t\t{\r" +
"\n\t\t\t\t\t\t\t\tget.AddValue(xmlNode.Name, xmlNode.Value);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n" +
"\t\t\t\t\telse if (contentType == NFinal.ContentType.Application_json)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t" +
"\tSystem.IO.StreamReader sr = new System.IO.StreamReader(context.Request.InputStr" +
"eam);\r\n                        string body = sr.ReadToEnd();\r\n                  " +
"      sr.Dispose();\r\n                        IDictionary<string,object> data= Si" +
"mpleJson.DeserializeObject <IDictionary<string, object>>(body);\r\n               " +
"         foreach (var ele in data)\r\n                        {\r\n                 " +
"           get.AddValue(ele.Key, ele.Value.ToString());\r\n                       " +
" }\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if (contentType == NFinal.ContentType.Multipart_form_data)" +
"\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t//multipart/form-data\r\n\t\t\t\t\t\tstring boundary =NFinal.HttpMultipa" +
"rt.boundaryReg.Match(context.Request.ContentType).Value;\r\n\t\t\t\t\t\tfiles = new Dict" +
"ionary<string, NFinal.HttpFile>();\r\n\t\t\t\t\t\tvar multipart = new NFinal.HttpMultipa" +
"rt(context.Request.InputStream, boundary);\r\n\t\t\t\t\t\tforeach (var httpMultipartBoun" +
"dary in multipart.GetBoundaries())\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tif (string.IsNullOrEmpty(htt" +
"pMultipartBoundary.Filename))\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tstring name = httpMultipartBoun" +
"dary.Name;\r\n\t\t\t\t\t\t\t\tif (!string.IsNullOrEmpty(name))\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tstring" +
" value = new System.IO.StreamReader(httpMultipartBoundary.Value).ReadToEnd();\r\n\t" +
"\t\t\t\t\t\t\t\tget.AddValue(name, value);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t{\r\n" +
"\t\t\t\t\t\t\t\tfiles.Add(httpMultipartBoundary.Name,new NFinal.HttpFile(httpMultipartBo" +
"undary));\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t//提取URL?后的参数\r\n\t\t\tif (conte" +
"xt.Request.QueryString.Count > 0)\r\n            {\r\n                for (int i = 0" +
"; i < context.Request.QueryString.Count; i++)\r\n                {\r\n              " +
"      get.AddValue(context.Request.QueryString.Keys[i], context.Request.QueryStr" +
"ing[i]);\r\n                }\r\n            }\r\n            //获取actionUrl,用于获取参数\r\n  " +
"          string actionUrl = GetActionUrl(requestedPath);\r\n            switch (f" +
"ind)\r\n            {\r\n");

            
            #line 312 "..\..\Template\Startup\Router.cshtml"
				
            
            #line default
            #line hidden
            
            #line 312 "..\..\Template\Startup\Router.cshtml"
      int i=1;int j=1;
				foreach(var fileData in Model.controllerFileDataList){
				var config=fileData.config;
                foreach(var classData in fileData.ClassDataList){
				foreach(var method in classData.MethodDataList){
					if(method.isPublic){

            
            #line default
            #line hidden
WriteLiteral("\t\t\t\t\t");

WriteLiteral("case ");

            
            #line 318 "..\..\Template\Startup\Router.cshtml"
       Write(i);

            
            #line default
            #line hidden
WriteLiteral(":\r\n");

WriteLiteral("\t\t\t\t\t");

WriteLiteral("{\r\n");

WriteLiteral("\t\t\t\t\t\t");

WriteLiteral("context.Response.ContentType = \"");

            
            #line 320 "..\..\Template\Startup\Router.cshtml"
                                          
            
            #line default
            #line hidden
            
            #line 320 "..\..\Template\Startup\Router.cshtml"
                                     Write(method.contentType);

            
            #line default
            #line hidden
            
            #line 320 "..\..\Template\Startup\Router.cshtml"
                                                             
            
            #line default
            #line hidden
WriteLiteral("\";\r\n");

            
            #line 321 "..\..\Template\Startup\Router.cshtml"
						if(!method.urlParser.hasNoParamsInUrl){

            
            #line default
            #line hidden
WriteLiteral("\t\t\t\t\t\t\t");

WriteLiteral("Regex regParameters = new Regex(\"");

            
            #line 322 "..\..\Template\Startup\Router.cshtml"
                                            
            
            #line default
            #line hidden
            
            #line 322 "..\..\Template\Startup\Router.cshtml"
                                       Write(method.urlParser.parameterRegex);

            
            #line default
            #line hidden
            
            #line 322 "..\..\Template\Startup\Router.cshtml"
                                                                            
            
            #line default
            #line hidden
WriteLiteral("\");\r\n");

WriteLiteral("\t\t\t\t\t\t\t");

WriteLiteral("Match matParameters = regParameters.Match(requestedPath);\r\n");

            
            #line 324 "..\..\Template\Startup\Router.cshtml"
							j=1;
							foreach(var parameterData in method.parameterDataList){
							if(parameterData.isUrlParameter){

            
            #line default
            #line hidden
WriteLiteral("\t\t\t\t\t\t\t");

WriteLiteral("if (get[\"");

            
            #line 327 "..\..\Template\Startup\Router.cshtml"
                    
            
            #line default
            #line hidden
            
            #line 327 "..\..\Template\Startup\Router.cshtml"
               Write(parameterData.name);

            
            #line default
            #line hidden
            
            #line 327 "..\..\Template\Startup\Router.cshtml"
                                       
            
            #line default
            #line hidden
WriteLiteral("\"] == null)\r\n");

WriteLiteral("\t\t\t\t\t\t\t");

WriteLiteral("{\r\n");

WriteLiteral("\t\t\t\t\t\t\t\t");

WriteLiteral("get.Add(\"");

            
            #line 329 "..\..\Template\Startup\Router.cshtml"
                     
            
            #line default
            #line hidden
            
            #line 329 "..\..\Template\Startup\Router.cshtml"
                Write(parameterData.name);

            
            #line default
            #line hidden
            
            #line 329 "..\..\Template\Startup\Router.cshtml"
                                        
            
            #line default
            #line hidden
WriteLiteral("\", matParameters.Groups[");

            
            #line 329 "..\..\Template\Startup\Router.cshtml"
                                                            Write(j);

            
            #line default
            #line hidden
WriteLiteral("].Value);\r\n");

WriteLiteral("\t\t\t\t\t\t\t");

WriteLiteral("}\r\n");

WriteLiteral("\t\t\t\t\t\t\t");

WriteLiteral("else\r\n");

WriteLiteral("\t\t\t\t\t\t\t");

WriteLiteral("{\r\n");

WriteLiteral("\t\t\t\t\t\t\t\t");

WriteLiteral("get[\"");

            
            #line 333 "..\..\Template\Startup\Router.cshtml"
                 
            
            #line default
            #line hidden
            
            #line 333 "..\..\Template\Startup\Router.cshtml"
            Write(parameterData.name);

            
            #line default
            #line hidden
            
            #line 333 "..\..\Template\Startup\Router.cshtml"
                                    
            
            #line default
            #line hidden
WriteLiteral("\"] = matParameters.Groups[");

            
            #line 333 "..\..\Template\Startup\Router.cshtml"
                                                          Write(j);

            
            #line default
            #line hidden
WriteLiteral("].Value;\r\n");

WriteLiteral("\t\t\t\t\t\t\t");

WriteLiteral("}\r\n");

            
            #line 335 "..\..\Template\Startup\Router.cshtml"
							j++;
							}
							}
						}

            
            #line default
            #line hidden
WriteLiteral("\t\t\t\t\t\t");

            
            #line 339 "..\..\Template\Startup\Router.cshtml"
   Write(method.verifyCode);

            
            #line default
            #line hidden
WriteLiteral("\r\n");

            
            #line 340 "..\..\Template\Startup\Router.cshtml"
						if(method.optimizing==0){

            
            #line default
            #line hidden
WriteLiteral("\t\t\t\t\t\t");

            
            #line 341 "..\..\Template\Startup\Router.cshtml"
          
            
            #line default
            #line hidden
            
            #line 341 "..\..\Template\Startup\Router.cshtml"
     Write(fileData.appName);

            
            #line default
            #line hidden
            
            #line 341 "..\..\Template\Startup\Router.cshtml"
                           
            
            #line default
            #line hidden
WriteLiteral(".Web.");

            
            #line 341 "..\..\Template\Startup\Router.cshtml"
                                   
            
            #line default
            #line hidden
            
            #line 341 "..\..\Template\Startup\Router.cshtml"
                              Write(config.defaultStyle);

            
            #line default
            #line hidden
            
            #line 341 "..\..\Template\Startup\Router.cshtml"
                                                       
            
            #line default
            #line hidden
            
            #line 341 "..\..\Template\Startup\Router.cshtml"
                                                          
            
            #line default
            #line hidden
            
            #line 341 "..\..\Template\Startup\Router.cshtml"
                                                     Write(classData.relativeDotName);

            
            #line default
            #line hidden
            
            #line 341 "..\..\Template\Startup\Router.cshtml"
                                                                                    
            
            #line default
            #line hidden
WriteLiteral(".");

            
            #line 341 "..\..\Template\Startup\Router.cshtml"
                                                                                        
            
            #line default
            #line hidden
            
            #line 341 "..\..\Template\Startup\Router.cshtml"
                                                                                   Write(method.name);

            
            #line default
            #line hidden
            
            #line 341 "..\..\Template\Startup\Router.cshtml"
                                                                                                    
            
            #line default
            #line hidden
WriteLiteral("Action control= new ");

            
            #line 341 "..\..\Template\Startup\Router.cshtml"
                                                                                                                           
            
            #line default
            #line hidden
            
            #line 341 "..\..\Template\Startup\Router.cshtml"
                                                                                                                      Write(fileData.appName);

            
            #line default
            #line hidden
            
            #line 341 "..\..\Template\Startup\Router.cshtml"
                                                                                                                                            
            
            #line default
            #line hidden
WriteLiteral(".Web.");

            
            #line 341 "..\..\Template\Startup\Router.cshtml"
                                                                                                                                                    
            
            #line default
            #line hidden
            
            #line 341 "..\..\Template\Startup\Router.cshtml"
                                                                                                                                               Write(config.defaultStyle);

            
            #line default
            #line hidden
            
            #line 341 "..\..\Template\Startup\Router.cshtml"
                                                                                                                                                                        
            
            #line default
            #line hidden
            
            #line 341 "..\..\Template\Startup\Router.cshtml"
                                                                                                                                                                           
            
            #line default
            #line hidden
            
            #line 341 "..\..\Template\Startup\Router.cshtml"
                                                                                                                                                                      Write(classData.relativeDotName);

            
            #line default
            #line hidden
            
            #line 341 "..\..\Template\Startup\Router.cshtml"
                                                                                                                                                                                                     
            
            #line default
            #line hidden
WriteLiteral(".");

            
            #line 341 "..\..\Template\Startup\Router.cshtml"
                                                                                                                                                                                                         
            
            #line default
            #line hidden
            
            #line 341 "..\..\Template\Startup\Router.cshtml"
                                                                                                                                                                                                    Write(method.name);

            
            #line default
            #line hidden
            
            #line 341 "..\..\Template\Startup\Router.cshtml"
                                                                                                                                                                                                                     
            
            #line default
            #line hidden
WriteLiteral("Action(context);\r\n");

            
            #line 342 "..\..\Template\Startup\Router.cshtml"
						foreach(var parameterData in method.parameterDataList){
							
            
            #line default
            #line hidden
            
            #line 343 "..\..\Template\Startup\Router.cshtml"
  Write(parameterData.getParamterCode);

            
            #line default
            #line hidden
            
            #line 343 "..\..\Template\Startup\Router.cshtml"
                                     
						}

            
            #line default
            #line hidden
WriteLiteral("\t\t\t\t\t\t");

WriteLiteral("control._methodType = methodType;\r\n");

WriteLiteral("\t\t\t\t\t\t");

WriteLiteral("control._context = context;\r\n");

WriteLiteral("\t\t\t\t\t\t");

WriteLiteral("control._subdomain = subdomain;\r\n");

WriteLiteral("\t\t\t\t\t\t");

WriteLiteral("control._url=requestedPath;\r\n");

WriteLiteral("\t\t\t\t\t\t");

WriteLiteral("control._get = get;\r\n");

WriteLiteral("\t\t\t\t\t\t");

WriteLiteral("control._app=\"/");

            
            #line 350 "..\..\Template\Startup\Router.cshtml"
                         
            
            #line default
            #line hidden
            
            #line 350 "..\..\Template\Startup\Router.cshtml"
                    Write(fileData.appName);

            
            #line default
            #line hidden
            
            #line 350 "..\..\Template\Startup\Router.cshtml"
                                          
            
            #line default
            #line hidden
WriteLiteral("\";\r\n");

WriteLiteral("\t\t\t\t\t\t");

WriteLiteral("control.Before();\r\n");

WriteLiteral("\t\t\t\t\t\t");

WriteLiteral("control.");

            
            #line 352 "..\..\Template\Startup\Router.cshtml"
                  
            
            #line default
            #line hidden
            
            #line 352 "..\..\Template\Startup\Router.cshtml"
             Write(method.name);

            
            #line default
            #line hidden
            
            #line 352 "..\..\Template\Startup\Router.cshtml"
                              
            
            #line default
            #line hidden
WriteLiteral("(");

            
            #line 352 "..\..\Template\Startup\Router.cshtml"
                                  
            
            #line default
            #line hidden
            
            #line 352 "..\..\Template\Startup\Router.cshtml"
                             Write(method.parameterNames);

            
            #line default
            #line hidden
            
            #line 352 "..\..\Template\Startup\Router.cshtml"
                                                        
            
            #line default
            #line hidden
WriteLiteral(");\r\n");

WriteLiteral("\t\t\t\t\t\t");

WriteLiteral("control.After();\r\n");

WriteLiteral("\t\t\t\t\t\t");

WriteLiteral("control.Close();\r\n");

WriteLiteral("\t\t\t\t\t\t");

WriteLiteral("context.Response.End();\r\n");

            
            #line 356 "..\..\Template\Startup\Router.cshtml"
						}else{
						//优化选项

            
            #line default
            #line hidden
WriteLiteral("                        ");

WriteLiteral("int optimizing = ");

            
            #line 358 "..\..\Template\Startup\Router.cshtml"
                                             
            
            #line default
            #line hidden
            
            #line 358 "..\..\Template\Startup\Router.cshtml"
                                        Write(method.optimizing);

            
            #line default
            #line hidden
            
            #line 358 "..\..\Template\Startup\Router.cshtml"
                                                               
            
            #line default
            #line hidden
WriteLiteral(";\r\n");

WriteLiteral("                        ");

WriteLiteral("int minutes = ");

            
            #line 359 "..\..\Template\Startup\Router.cshtml"
                                          
            
            #line default
            #line hidden
            
            #line 359 "..\..\Template\Startup\Router.cshtml"
                                     Write(method.minutes);

            
            #line default
            #line hidden
            
            #line 359 "..\..\Template\Startup\Router.cshtml"
                                                         
            
            #line default
            #line hidden
WriteLiteral(";\r\n");

WriteLiteral("                        ");

WriteLiteral("string url = requestedPath;\r\n");

WriteLiteral("                        ");

WriteLiteral("string query = context.Request.QueryString.ToString();\r\n");

WriteLiteral("                        ");

WriteLiteral("bool compress = (optimizing & (int)NFinal.Optimizing.Comresssed)!=0;\r\n");

            
            #line 363 "..\..\Template\Startup\Router.cshtml"
                        //设置浏览器缓存

            
            #line default
            #line hidden
WriteLiteral("                        ");

WriteLiteral("SetBrowerCache(context, optimizing, seconds);\r\n");

            
            #line 365 "..\..\Template\Startup\Router.cshtml"
                        //是否启用了服务器缓存

            
            #line default
            #line hidden
WriteLiteral("                        ");

WriteLiteral("bool serverCahce = (optimizing & (int)NFinal.Optimizing.Cache_Server_Cached) != 0" +
";\r\n");

WriteLiteral("                        ");

WriteLiteral("bool hasCache = false;\r\n");

            
            #line 368 "..\..\Template\Startup\Router.cshtml"
                        //服务器缓存

            
            #line default
            #line hidden
WriteLiteral("                        ");

WriteLiteral("if (serverCahce)\r\n");

WriteLiteral("                        ");

WriteLiteral("{\r\n");

            
            #line 371 "..\..\Template\Startup\Router.cshtml"
                            //如果是文件缓存，不加query

            
            #line default
            #line hidden
WriteLiteral("\t\t\t\t\t\t\t");

WriteLiteral("if ((optimizing & (int)NFinal.Optimizing.Cache_Server_FileDependency) != 0)\r\n");

WriteLiteral("\t\t\t\t\t\t\t");

WriteLiteral("{\r\n");

WriteLiteral("\t\t\t\t\t\t\t\t");

WriteLiteral("hasCache=WriteCache(context,url,optimizing);\r\n");

WriteLiteral("\t\t\t\t\t\t\t");

WriteLiteral("}\r\n");

WriteLiteral("                            ");

WriteLiteral("else\r\n");

WriteLiteral("\t\t\t\t\t\t\t");

WriteLiteral("{\r\n");

WriteLiteral("\t\t\t\t\t\t\t\t");

WriteLiteral("hasCache=WriteCache(context,url+query,optimizing);\r\n");

WriteLiteral("\t\t\t\t\t\t\t");

WriteLiteral("}\r\n");

WriteLiteral("                        ");

WriteLiteral("}\r\n");

            
            #line 381 "..\..\Template\Startup\Router.cshtml"
                        //如果没有缓存

            
            #line default
            #line hidden
WriteLiteral("                        ");

WriteLiteral("if (!hasCache)\r\n");

WriteLiteral("                        ");

WriteLiteral("{\r\n");

WriteLiteral("                            ");

WriteLiteral("System.IO.MemoryStream htmlStream = new System.IO.MemoryStream();\r\n");

            
            #line 385 "..\..\Template\Startup\Router.cshtml"
                                    

            
            #line default
            #line hidden
WriteLiteral("                            ");

            
            #line 386 "..\..\Template\Startup\Router.cshtml"
                                
            
            #line default
            #line hidden
            
            #line 386 "..\..\Template\Startup\Router.cshtml"
                           Write(fileData.appName);

            
            #line default
            #line hidden
            
            #line 386 "..\..\Template\Startup\Router.cshtml"
                                                 
            
            #line default
            #line hidden
WriteLiteral(".Web.");

            
            #line 386 "..\..\Template\Startup\Router.cshtml"
                                                         
            
            #line default
            #line hidden
            
            #line 386 "..\..\Template\Startup\Router.cshtml"
                                                    Write(config.defaultStyle);

            
            #line default
            #line hidden
            
            #line 386 "..\..\Template\Startup\Router.cshtml"
                                                                             
            
            #line default
            #line hidden
            
            #line 386 "..\..\Template\Startup\Router.cshtml"
                                                                                
            
            #line default
            #line hidden
            
            #line 386 "..\..\Template\Startup\Router.cshtml"
                                                                           Write(classData.relativeDotName);

            
            #line default
            #line hidden
            
            #line 386 "..\..\Template\Startup\Router.cshtml"
                                                                                                          
            
            #line default
            #line hidden
WriteLiteral(".");

            
            #line 386 "..\..\Template\Startup\Router.cshtml"
                                                                                                              
            
            #line default
            #line hidden
            
            #line 386 "..\..\Template\Startup\Router.cshtml"
                                                                                                         Write(method.name);

            
            #line default
            #line hidden
            
            #line 386 "..\..\Template\Startup\Router.cshtml"
                                                                                                                          
            
            #line default
            #line hidden
WriteLiteral("Action control = null;\r\n");

WriteLiteral("                            ");

WriteLiteral("System.IO.Stream stream = null;\r\n");

WriteLiteral("                            ");

WriteLiteral("System.IO.StreamWriter sw = null;\r\n");

            
            #line 389 "..\..\Template\Startup\Router.cshtml"
                            //如果有压缩或缓存

            
            #line default
            #line hidden
WriteLiteral("                            ");

WriteLiteral("if (compress || serverCahce)\r\n");

WriteLiteral("                            ");

WriteLiteral("{\r\n");

WriteLiteral("                                ");

WriteLiteral("if ((optimizing & (int)NFinal.Optimizing.Comresssed) != 0)\r\n");

WriteLiteral("                                ");

WriteLiteral("{\r\n");

WriteLiteral("                                    ");

WriteLiteral("if ((optimizing & (int)NFinal.Optimizing.CompressZip) != 0)\r\n");

WriteLiteral("                                    ");

WriteLiteral("{\r\n");

WriteLiteral("                                        ");

WriteLiteral("stream = new System.IO.Compression.GZipStream(htmlStream, System.IO.Compression.C" +
"ompressionMode.Compress, true);\r\n");

WriteLiteral("                                        ");

WriteLiteral("context.Response.AppendHeader(\"Content-Encoding\", \"gzip\");\r\n");

WriteLiteral("                                    ");

WriteLiteral("}\r\n");

WriteLiteral("                                    ");

WriteLiteral("else if ((optimizing & (int)NFinal.Optimizing.CompressDeflate) != 0)\r\n");

WriteLiteral("                                    ");

WriteLiteral("{\r\n");

WriteLiteral("                                        ");

WriteLiteral("stream = new System.IO.Compression.DeflateStream(htmlStream, System.IO.Compressio" +
"n.CompressionMode.Compress, true);\r\n");

WriteLiteral("                                        ");

WriteLiteral("context.Response.AppendHeader(\"Content-Encoding\", \"deflate\");\r\n");

WriteLiteral("                                    ");

WriteLiteral("}\r\n");

WriteLiteral("                                    ");

WriteLiteral("sw = new System.IO.StreamWriter(stream);\r\n");

WriteLiteral("                                ");

WriteLiteral("}\r\n");

WriteLiteral("                                ");

WriteLiteral("else\r\n");

WriteLiteral("                                ");

WriteLiteral("{\r\n");

WriteLiteral("                                    ");

WriteLiteral("sw = new System.IO.StreamWriter(htmlStream);\r\n");

WriteLiteral("                                ");

WriteLiteral("}\r\n");

WriteLiteral("                                ");

WriteLiteral("control = new ");

            
            #line 410 "..\..\Template\Startup\Router.cshtml"
                                                  
            
            #line default
            #line hidden
            
            #line 410 "..\..\Template\Startup\Router.cshtml"
                                             Write(fileData.appName);

            
            #line default
            #line hidden
            
            #line 410 "..\..\Template\Startup\Router.cshtml"
                                                                   
            
            #line default
            #line hidden
WriteLiteral(".Web.");

            
            #line 410 "..\..\Template\Startup\Router.cshtml"
                                                                           
            
            #line default
            #line hidden
            
            #line 410 "..\..\Template\Startup\Router.cshtml"
                                                                      Write(config.defaultStyle);

            
            #line default
            #line hidden
            
            #line 410 "..\..\Template\Startup\Router.cshtml"
                                                                                               
            
            #line default
            #line hidden
            
            #line 410 "..\..\Template\Startup\Router.cshtml"
                                                                                                  
            
            #line default
            #line hidden
            
            #line 410 "..\..\Template\Startup\Router.cshtml"
                                                                                             Write(classData.relativeDotName);

            
            #line default
            #line hidden
            
            #line 410 "..\..\Template\Startup\Router.cshtml"
                                                                                                                            
            
            #line default
            #line hidden
WriteLiteral(".");

            
            #line 410 "..\..\Template\Startup\Router.cshtml"
                                                                                                                                
            
            #line default
            #line hidden
            
            #line 410 "..\..\Template\Startup\Router.cshtml"
                                                                                                                           Write(method.name);

            
            #line default
            #line hidden
            
            #line 410 "..\..\Template\Startup\Router.cshtml"
                                                                                                                                            
            
            #line default
            #line hidden
WriteLiteral("Action(sw);\r\n");

WriteLiteral("                            ");

WriteLiteral("}\r\n");

WriteLiteral("                            ");

WriteLiteral("else\r\n");

WriteLiteral("                            ");

WriteLiteral("{\r\n");

WriteLiteral("                                ");

WriteLiteral("control = new ");

            
            #line 414 "..\..\Template\Startup\Router.cshtml"
                                                  
            
            #line default
            #line hidden
            
            #line 414 "..\..\Template\Startup\Router.cshtml"
                                             Write(fileData.appName);

            
            #line default
            #line hidden
            
            #line 414 "..\..\Template\Startup\Router.cshtml"
                                                                   
            
            #line default
            #line hidden
WriteLiteral(".Web.");

            
            #line 414 "..\..\Template\Startup\Router.cshtml"
                                                                           
            
            #line default
            #line hidden
            
            #line 414 "..\..\Template\Startup\Router.cshtml"
                                                                      Write(config.defaultStyle);

            
            #line default
            #line hidden
            
            #line 414 "..\..\Template\Startup\Router.cshtml"
                                                                                               
            
            #line default
            #line hidden
            
            #line 414 "..\..\Template\Startup\Router.cshtml"
                                                                                                  
            
            #line default
            #line hidden
            
            #line 414 "..\..\Template\Startup\Router.cshtml"
                                                                                             Write(classData.relativeDotName);

            
            #line default
            #line hidden
            
            #line 414 "..\..\Template\Startup\Router.cshtml"
                                                                                                                            
            
            #line default
            #line hidden
WriteLiteral(".");

            
            #line 414 "..\..\Template\Startup\Router.cshtml"
                                                                                                                                
            
            #line default
            #line hidden
            
            #line 414 "..\..\Template\Startup\Router.cshtml"
                                                                                                                           Write(method.name);

            
            #line default
            #line hidden
            
            #line 414 "..\..\Template\Startup\Router.cshtml"
                                                                                                                                            
            
            #line default
            #line hidden
WriteLiteral("Action(context);\r\n");

WriteLiteral("                            ");

WriteLiteral("}\r\n");

            
            #line 416 "..\..\Template\Startup\Router.cshtml"
							foreach(var parameterData in method.parameterDataList){
								
            
            #line default
            #line hidden
            
            #line 417 "..\..\Template\Startup\Router.cshtml"
   Write(parameterData.getParamterCode);

            
            #line default
            #line hidden
            
            #line 417 "..\..\Template\Startup\Router.cshtml"
                                      
							}

            
            #line default
            #line hidden
WriteLiteral("                            ");

WriteLiteral("control._context = context;\r\n");

WriteLiteral("                            ");

WriteLiteral("control._subdomain = subdomain;\r\n");

WriteLiteral("                            ");

WriteLiteral("control._url = requestedPath;\r\n");

WriteLiteral("                            ");

WriteLiteral("control._get = get;\r\n");

WriteLiteral("\t\t\t\t\t\t\t");

WriteLiteral("control._files = files;\r\n");

WriteLiteral("                            ");

WriteLiteral("control._app=\"/");

            
            #line 424 "..\..\Template\Startup\Router.cshtml"
                                               
            
            #line default
            #line hidden
            
            #line 424 "..\..\Template\Startup\Router.cshtml"
                                          Write(fileData.appName);

            
            #line default
            #line hidden
            
            #line 424 "..\..\Template\Startup\Router.cshtml"
                                                                
            
            #line default
            #line hidden
WriteLiteral("\";\r\n");

WriteLiteral("                            ");

WriteLiteral("control.Before();\r\n");

WriteLiteral("                            ");

WriteLiteral("control.");

            
            #line 426 "..\..\Template\Startup\Router.cshtml"
                                        
            
            #line default
            #line hidden
            
            #line 426 "..\..\Template\Startup\Router.cshtml"
                                   Write(method.name);

            
            #line default
            #line hidden
            
            #line 426 "..\..\Template\Startup\Router.cshtml"
                                                    
            
            #line default
            #line hidden
WriteLiteral("(");

            
            #line 426 "..\..\Template\Startup\Router.cshtml"
                                                        
            
            #line default
            #line hidden
            
            #line 426 "..\..\Template\Startup\Router.cshtml"
                                                   Write(method.parameterNames);

            
            #line default
            #line hidden
            
            #line 426 "..\..\Template\Startup\Router.cshtml"
                                                                              
            
            #line default
            #line hidden
WriteLiteral(");\r\n");

WriteLiteral("                            ");

WriteLiteral("control.After();\r\n");

WriteLiteral("                            ");

WriteLiteral("control.Close();\r\n");

WriteLiteral("                            ");

WriteLiteral("byte[] buffer = htmlStream.ToArray();\r\n");

WriteLiteral("\t\t\t\t\t\t\t");

WriteLiteral("htmlStream.Dispose();\r\n");

            
            #line 431 "..\..\Template\Startup\Router.cshtml"
                            //如果有压缩或缓存

            
            #line default
            #line hidden
WriteLiteral("                            ");

WriteLiteral("if (compress || serverCahce)\r\n");

WriteLiteral("                            ");

WriteLiteral("{\r\n");

WriteLiteral("                                ");

WriteLiteral("SetServerCacheAndOutPut(context, url, query, buffer, optimizing, minutes);\r\n");

WriteLiteral("                            ");

WriteLiteral("}\t\r\n");

WriteLiteral("\t\t\t\t\t\t");

WriteLiteral("}\r\n");

            
            #line 437 "..\..\Template\Startup\Router.cshtml"
						}

            
            #line default
            #line hidden
WriteLiteral("\t\t\t\t\t");

WriteLiteral("}break;\r\n");

            
            #line 439 "..\..\Template\Startup\Router.cshtml"
					i++;
					}
				}
				}
				}
				
            
            #line default
            #line hidden
WriteLiteral("\r\n                default: break;\r\n            }\r\n        }\r\n    }\r\n#endif\r\n}");

        }
    }
}
#pragma warning restore 1591
